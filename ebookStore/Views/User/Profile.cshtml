@model ebookStore.Models.ViewModels.ProfileViewModel
@{
    ViewData["Title"] = "User Profile";
    var username = ViewData["Username"] as string ?? "Guest";
    var role = ViewData["Role"] as string ?? "User";
}

<div class="container mt-4">
    <h1>User Profile</h1>
    <hr />

    <div class="profile-details">
        <h3>Profile Details</h3>
        <p><strong>Username:</strong> @username</p>
        <p><strong>First Name:</strong> @Model.FirstName</p>
        <p><strong>Last Name:</strong> @Model.LastName</p>
        <p><strong>Email:</strong> @Model.Email</p>
        <p><strong>Role:</strong> @role</p>
    </div>

    <hr />

    <!-- Borrowed Books Section -->
    <div class="borrowed-books mt-4">
        <h3>Borrowed Books</h3>
        @if (Model.BorrowedBooks != null && Model.BorrowedBooks.Any())
        {
            <div class="d-flex flex-nowrap overflow-x-auto g-4">
                @foreach (var book in Model.BorrowedBooks)
                {
                    <div class="card flex-shrink-0" style="width: 500px;">
                        <div class="card-body">
                            <h5 class="card-title text-truncate">@book.Title</h5>
                            <p class="card-text"><strong>Author:</strong> @book.Author</p>
                            <p class="card-text"><strong>Borrow Date:</strong> @book.BorrowDate.ToString("yyyy-MM-dd")</p>
                            <p class="card-text"><strong>Return Date:</strong> @book.ReturnDate.ToString("yyyy-MM-dd")</p>
                            <div class="mt-3">
                                <a href="@Url.Action("Details", "Books", new { id = book.Title })"
                                   class="btn btn-info w-100">View</a>
                            </div>
                        </div>
                    </div>
                }
            </div>


        }
        else
        {
            <p>No borrowed books found.</p>
        }
    </div>

    <hr />

    <!-- Purchased Books Section -->
    <div class="purchased-books mt-4">
        <h3>Purchased Books</h3>
        @if (Model.PurchasedBooks != null && Model.PurchasedBooks.Any())
        {
            <div class="row g-4">
                @foreach (var book in Model.PurchasedBooks)
                {
                    <div class="col-md-6">
                        <div class="card h-100 shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title text-truncate">@book.Title</h5>
                                <p class="card-text"><strong>Author:</strong> @book.Author</p>
                                <p class="card-text"><strong>Purchase Date:</strong> @book.PurchaseDate.ToString("yyyy-MM-dd")</p>
                                <div class="mt-3">
                                    <a href="@Url.Action("Details", "Books", new { id = book.Author })"
                                       class="btn btn-info w-100">View</a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <p>No purchased books found.</p>
        }
    </div>
</div>